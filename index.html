<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="fonts/icomoon/style.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <title>Sparta - Login</title>

    <!-- Firebase Setup -->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-analytics.js";
      import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBvhdmhh12h2qbl99385j3iRKR9EEw01HU",
        authDomain: "sparta-m.firebaseapp.com",
        projectId: "sparta-m",
        storageBucket: "sparta-m.appspot.com",
        messagingSenderId: "137777159078",
        appId: "1:137777159078:web:0d7639edd4feb7441d0d67",
        measurementId: "G-5519CNXMV7"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);

      // Initialize Firebase Authentication and get a reference to the service
      const auth = getAuth();

      document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault();
        var email = document.getElementById('username').value;
        var password = document.getElementById('password').value;

        signInWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            // Signed in
            var user = userCredential.user;
            alert('Login successful');
            // Redirect to dashboard or shift schedule page
            window.location.href = "dashboard.html";
          })
          .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            alert('Error: ' + errorMessage);
          });
      });
    </script>
  </head>
  <body>
    <div class="d-lg-flex half">
      <div class="bg order-1 order-md-2" style="background-image: url('images/company_bg.jpg')"></div>
      <div class="contents order-2 order-md-1">
        <div class="container">
          <div class="row align-items-center justify-content-center">
            <div class="col-md-7">
              <h3>Employee Login</h3>
              <p class="mb-4">
                Please log in to access your weekly shift schedule. Make sure to use your Employee ID and the password provided by the HR department. If you experience any issues, please contact support.
              </p>
              <form id="loginForm">
                <div class="form-group first">
                  <label for="username">Employee ID</label>
                  <input type="text" class="form-control" placeholder="Enter your Employee ID" id="username" required />
                </div>
                <div class="form-group last mb-3">
                  <label for="password">Password</label>
                  <input type="password" class="form-control" placeholder="Your Password" id="password" required />
                </div>
                <input type="submit" value="Sign In" class="btn btn-block btn-primary" />
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
