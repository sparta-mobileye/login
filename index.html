<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sparta - Login</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="d-lg-flex half">
        <div class="bg order-1 order-md-2" style="background-image: url('images/company_bg.jpg')"></div>
        <div class="contents order-2 order-md-1">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-7">
                        <h3>Employee Login</h3>
                        <p class="mb-4">
                            Please log in to access your weekly shift schedule. Make sure to use your Employee ID and the password provided by the HR department. If you experience any issues, please contact support.
                        </p>
                        <form id="loginForm">
                            <div class="form-group first">
                                <label for="username">Employee ID</label>
                                <input type="text" class="form-control" placeholder="Enter your Employee ID" id="username" required />
                            </div>
                            <div class="form-group last mb-3">
                                <label for="password">Password</label>
                                <input type="password" class="form-control" placeholder="Your Password" id="password" required />
                            </div>
                            <input type="submit" value="Sign In" class="btn btn-block btn-primary" />
                        </form>
                        <p class="mt-3">Don't have an account? <a href="signup.html">Sign up here</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Firebase configuration and initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBvhdmhh12h2qbl99385j3iRKR9EEw01HU",
            authDomain: "sparta-m.firebaseapp.com",
            projectId: "sparta-m",
            storageBucket: "sparta-m.appspot.com",
            messagingSenderId: "137777159078",
            appId: "1:137777159078:web:0d7639edd4feb7441d0d67",
            measurementId: "G-5519CNXMV7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Handle login form submission
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const email = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    alert('Login successful');
                    window.location.href = "dashboard.html";
                })
                .catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert('Error: ' + errorMessage);
                });
        });
    </script>
</body>
</html>
